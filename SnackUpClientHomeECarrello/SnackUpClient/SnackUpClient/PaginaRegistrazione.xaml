<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="SnackUpClient.PaginaRegistrazione"
             Title="PaginaRegistrazione"
             Padding="0,10,0,0">
    <ScrollView HorizontalScrollBarVisibility="Never" 
            VerticalScrollBarVisibility="Never">
        <Grid>
            <!-- Immagine sotto il titolo -->
            
            <VerticalStackLayout Padding="20" Spacing="15">

                <!-- Intestazione -->
                <Label Text="Registrati su Snack Up! "
                FontSize="28"
                FontFamily="Roboto-Black"
                TextColor="#FF7B21"
                HorizontalOptions="Center"
                Margin="10, 10,80,0"/>

                <Label Text="Inserisci i tuoi dati:"
                FontSize="16"
                FontFamily="Roboto-Bold"
                 Margin="10,10,0,10"
                VerticalOptions="Start"
                HorizontalOptions="Start" />

                <VerticalStackLayout Padding="0" Spacing="15">

                    <!-- NOME -->

                    <Frame CornerRadius="15" BorderColor="{Binding NameFrameColor}" Padding="3">
                        <Entry Placeholder="Nome" FontSize="16" Text="{Binding Name}" />
                    </Frame>
                    <Label Text="*Questo campo è obbligatorio"
               TextColor="#FF7B21"
               FontSize="12"
               IsVisible="{Binding IsNameErrorVisible}"
               HorizontalOptions="Start"
               Margin="10,-15,0,0" />

                    <Frame CornerRadius="15" BorderColor="{Binding SurnameFrameColor}" Padding="3">
                        <Entry Placeholder="Cognome" FontSize="16" Text="{Binding Surname}" />
                    </Frame>
                    <Label Text="*Questo campo è obbligatorio"
               TextColor="#FF7B21"
               FontSize="12"
               IsVisible="{Binding IsSurnameErrorVisible}"
               HorizontalOptions="Start"
               Margin="10,-15,0,0" />

                    <!-- Email -->
                    <Frame CornerRadius="15"
                BorderColor="{Binding EmailFrameColor}"
                Padding="3"
                >
                        <Entry Placeholder="Email"

                    Keyboard="Email"
                    FontSize="16"
                    Text="{Binding Email}" />
                    </Frame>
                    <Label Text="*La mail non corrisponde"
                TextColor="#FF7B21"
                FontSize="12"
                IsVisible="{Binding IsEmailErrorVisible}"
                HorizontalOptions="Start"
                Margin="10,-15,0,0" />

                    <Frame CornerRadius="15" BorderColor="{Binding ConfirmEmailFrameColor}" Padding="3">
                        <Entry Placeholder="Conferma Email" Keyboard="Email" FontSize="16" Text="{Binding ConfirmEmail}" />
                    </Frame>
                    <Label Text="*La mail non corrisponde"
               TextColor="#FF7B21"
               FontSize="12"
               IsVisible="{Binding IsConfirmEmailErrorVisible}"
               HorizontalOptions="Start"
               Margin="10,-15,0,0" />


                    <Picker Title="Seleziona Città"
            ItemsSource="{Binding Cities}"
            SelectedItem="{Binding SelectedCity}" />
                    <Label Text="*Seleziona una città"
           TextColor="#FF7B21"
           FontSize="12"
           Margin="10,-15,0,0"
           IsVisible="{Binding IsCityErrorVisible}" />

                    <!-- Picker per Scuola -->
                    <Picker Title="Seleziona Scuola"
            ItemsSource="{Binding Schools}"
            SelectedItem="{Binding SelectedSchool}"
            IsEnabled="{Binding IsSchoolPickerEnabled}" />
                    <Label Text="*Seleziona una scuola"
           TextColor="#FF7B21"
           FontSize="12"
           Margin="10,-15,0,0"
           IsVisible="{Binding IsSchoolErrorVisible}" />

                    <!-- Picker per Classe -->
                    <Picker Title="Seleziona L'anno"
            ItemsSource="{Binding Years}"
            SelectedItem="{Binding SelectedYear}"
            IsEnabled="{Binding IsYearPickerEnabled}" />
                    <Label Text="*Seleziona l'anno"
           TextColor="#FF7B21"
           FontSize="12"
           Margin="10,-15,0,0"
           IsVisible="{Binding IsYearErrorVisible}" />

                    <!-- Picker per Aula -->
                    <Picker Title="Seleziona la sezione"
            ItemsSource="{Binding Sections}"
            SelectedItem="{Binding SelectedSection}"
            IsEnabled="{Binding IsSectionPickerEnabled}" />
                    <Label Text="*Seleziona la sezione"
           TextColor="#FF7B21"
           FontSize="12"
           Margin="10,-15,0,0"
           IsVisible="{Binding IsSectionErrorVisible}" />


                    <!-- Password -->

                    <Frame CornerRadius="15"
           BorderColor="{Binding PasswordFrameColor}"
           Padding="3">
                        <Grid>
                            <!-- Campo Password -->
                            <Entry Placeholder="Password"
                   IsPassword="{Binding IsPasswordHidden}"
                   FontSize="16"
                   Text="{Binding Password}"
                   TextColor="{AppThemeBinding Light=#171717, Dark=White}" />

                            <!-- Icona Occhio -->
                            <Image Source="{Binding EyeIcon}"
                           WidthRequest="20"
                           HeightRequest="20"
                           VerticalOptions="Center"
                           HorizontalOptions="End"
                           Margin="0,0,10,0">
                                <Image.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding TogglePasswordCommand}" />
                                </Image.GestureRecognizers>
                            </Image>
                        </Grid>
                    </Frame>
                    <Label Text="*La password non corrisponde"
                TextColor="#FF7B21"
                FontSize="12"
                IsVisible="{Binding IsPasswordErrorVisible}"
                HorizontalOptions="Start"
                Margin="10,-15,0,0" />
                    <!-- Conferma Password -->
                    <Frame CornerRadius="15"
           BorderColor="{Binding ConfirmPasswordFrameColor}"
           Padding="3">
                        <Grid>
                            <!-- Campo Conferma Password -->
                            <Entry Placeholder="Conferma Password"
                   IsPassword="{Binding IsConfirmPasswordHidden}"
                   FontSize="16"
                   Text="{Binding ConfirmPassword}"
                   TextColor="{AppThemeBinding Light=#171717, Dark=White}" />

                            <!-- Icona Occhio -->
                            <Image Source="{Binding ConfirmEyeIcon}"
                   WidthRequest="20"
                   HeightRequest="20"
                   VerticalOptions="Center"
                   HorizontalOptions="End"
                   Margin="0,0,10,0">
                                <Image.GestureRecognizers>
                                    <TapGestureRecognizer Command="{Binding ToggleConfirmPasswordCommand}" />
                                </Image.GestureRecognizers>
                            </Image>
                        </Grid>
                    </Frame>


                    <Label Text="*La password non corrisponde"
               TextColor="#FF7B21"
               FontSize="12"
               IsVisible="{Binding IsConfirmPasswordErrorVisible}"
               HorizontalOptions="Start"
               Margin="10,-15,0,0" />

                    <StackLayout Orientation="Horizontal"
             HorizontalOptions="Start"
             Margin="0,10,0,0">

                        <!-- Spunta Privacy -->
                        <CheckBox x:Name="PrivacyCheckBox"
                      Color="#FF7B21"
                      HorizontalOptions="Start"
                                  />
                        <Label VerticalOptions="Center"
                       FontSize="14"
                       FontFamily="Roboto-Medium"
                       HorizontalOptions="Start">
                            <Label.FormattedText>
                                <FormattedString>
                                    <Span Text="Accetto la " />
                                    <Span Text="Privacy Policy"
                              TextDecorations="Underline"
                              TextColor="#FF7B21">
                                        <Span.GestureRecognizers>
                                            <!--TapGestureRecognizer Tapped="OnPrivacyTapped" -->
                                        </Span.GestureRecognizers>
                                    </Span>
                                </FormattedString>
                            </Label.FormattedText>
                        </Label>
                    </StackLayout>

                    <StackLayout Orientation="Horizontal"
                         HorizontalOptions="Start"
                         Margin="0,0,0,20">
                        <!-- Spunta Termini e Condizioni -->
                        <CheckBox x:Name="TermsCheckBox"
                          Color="#FF7B21"
                          HorizontalOptions="Start" />
                        <Label VerticalOptions="Center"
                           FontSize="14"
                           FontFamily="Roboto-Medium"
                           HorizontalOptions="Start">
                            <Label.FormattedText>
                                <FormattedString>
                                    <Span Text="Accetto i " />
                                    <Span Text="Termini e Condizioni"
                                  TextDecorations="Underline"
                                  TextColor="#FF7B21">
                                        <Span.GestureRecognizers>
                                            <!--TapGestureRecognizer Tapped="OnTermsAndConditionsTapped" -->
                                        </Span.GestureRecognizers>
                                    </Span>
                                </FormattedString>
                            </Label.FormattedText>
                        </Label>
                    </StackLayout>


                </VerticalStackLayout>


                <!-- Bottone Sign In -->
                <Button Text="Registrati"
        BorderColor="Transparent"
        BackgroundColor="#FF7B21"
        TextColor="White"
        FontFamily="Roboto-Medium"
        FontSize="16"
        Command="{Binding ValidateCommand}"
        CornerRadius="35"
        HeightRequest="50" />


                <!-- Bottone Sign In con Google -->
                <Button Text="Registrati con Google"
            BackgroundColor="White"
            TextColor="#333"
            FontFamily="Roboto-Medium"
            FontSize="16"
            CornerRadius="35"
            BorderColor="#E0E0E0"
            BorderWidth="1"
            HeightRequest="50"
            Margin="0,10,0,0"
            ImageSource= "{Binding GoogleIcon}" >
                </Button>

                <Label HorizontalTextAlignment="Center"
               HorizontalOptions="Center"
               FontSize="14"
               Margin="0,15,0,0">
                    <Label.FormattedText>
                        <FormattedString>
                            <!-- Testo statico -->
                            <Span Text="Hai già fatto l'accesso? " />
                            <!-- Testo cliccabile -->
                            <Span Text="Clicca qui"
                  TextDecorations="Underline"
                  TextColor="#FF7B21">
                                <Span.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="OnNavigateToLogin" />
                                </Span.GestureRecognizers>
                            </Span>
                        </FormattedString>
                    </Label.FormattedText>
                </Label>

                <!-- Divider -->
                <Label 
                   HorizontalOptions="Center"
                   Margin="0,10,0,0" />


                <!-- Social Media -->
                <HorizontalStackLayout HorizontalOptions="Center" Spacing="25">
                    <Image Source="instagram_icon.svg" WidthRequest="30" HeightRequest="26" BackgroundColor="Transparent" />
                    <Image Source="facebook_icon.svg" WidthRequest="30" HeightRequest="25" BackgroundColor="Transparent" />
                    <Image Source="linkedin_icon.svg" WidthRequest="30" HeightRequest="26" BackgroundColor="Transparent" />
                </HorizontalStackLayout>

            </VerticalStackLayout>
        </Grid>
    </ScrollView>
</ContentPage>
